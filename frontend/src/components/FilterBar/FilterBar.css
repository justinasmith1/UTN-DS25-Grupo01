:root{
  --fb-green:#0D3730; --fb-green-soft:rgba(13,55,48,.10);
  --fb-line:#E6E6E6;  --fb-text:#1c1c1c;
  --fb-blue:#2849AF;  --fb-red:#E13D1D;
  --fb-sep:#C7D1CE;
  --fb-track-h:3px;   --fb-handle:12px;
}

/* ===== Barra ===== */
.fb{ position: sticky; top: 0; z-index: 8; background:#fff; border-bottom:1px solid var(--fb-line);}
.fb-row{ display:flex; gap:10px; align-items:center; }
.fb-search{ flex:1 1 560px; max-width:900px; display:flex; gap:10px; align-items:center; background:#fff; border:1px solid var(--fb-line); border-radius:14px; padding:10px 14px; transition: box-shadow .15s, border-color .15s; }
.fb-search.is-active{ border-color:var(--fb-green); box-shadow:0 0 0 3px var(--fb-green-soft); }
.fb-search input{ border:0; outline:0; width:100%; font-size:15px; }
.fb-filters{ display:flex; align-items:center; gap:8px; border:1px solid var(--fb-green); color:var(--fb-green); background:#fff; border-radius:14px; height:40px; padding:0 14px; font-weight:600; cursor:pointer; transition: background .15s, transform .02s, box-shadow .15s; }
.fb-filters:hover{ background:var(--fb-green-soft); box-shadow:0 0 0 3px var(--fb-green-soft); }
.fb-badge{ margin-left:4px; font-size:12px; min-width:20px; height:20px; display:inline-grid; place-items:center; background:var(--fb-green); color:#fff; border-radius:999px; padding:0 6px; }

/* Dashboard */
.fb-dashboard {
  padding: 10px 24px 20px 30px;
}

/* Mapa */
.fb-map {
  padding: 22px 24px 20px 30px;
}

/* ===== Overlay ===== */
.fb-modal{
  position: fixed; inset: 0;
  display: flex; justify-content: center; align-items: flex-start;
  padding-top: var(--fb-safe-top, 0px);
  background: rgba(0,0,0,.28);
  z-index: 2147483646;
}

/* Dashboard */
.fb-modal-dashboard {
  padding-top: 120px; /* Ajusta este valor para que el card esté más arriba */
}

/* Mapa */
.fb-modal-map {
  padding-top: 120px; /* O el valor que uses en el mapa */
}

/* ===== Sheet: header / body / footer ===== */
.fb-sheet{
  width: min(860px, 92vw);                
  max-height: calc(100vh - var(--fb-safe-top, 0px));
  background:#fff; border: 0.1px solid rgb(0, 0, 0, 0.7); border-radius:12px; overflow:hidden;
  box-shadow: 0 20px 60px rgba(0,0,0,.20);
  display:grid; grid-template-rows: auto 1fr auto;
}

/* Header */
.fb-sheet-header{
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 20px; border-bottom:1px solid rgba(12, 71, 12, 0.3);
  background:#f1fff4; z-index:1;
}
.fb-sheet-header h3{ margin:0; font-size:18px; font-weight:700; color:#333; }
.fb-close{ border:none; background:transparent; font-size:26px; line-height:1; cursor:pointer; color:#444; }

/* ==== Body: scrollea y al abrir muestra solo muestra las primeras 3 ==== */
.fb-sheet-body{
  overflow-y:auto; overflow-x:hidden;
  max-height: var(--fb-body-max, 420px);
  padding:12px 20px 16px; 
  gap:0;                  
}

/* ===== Sections (con separadores) ===== */
.fb-section{
  padding:14px 0;                 
}
.fb-section:not(:first-child){
  border-top: 1px solid var(--fb-sep); /* línea separadora visible */
  margin-top: 8px;
}
.fb-section h4{
  margin:0 0 10px 0; font-size:14px; color:#3a3a3a;
}

.fb-body-top{ display:grid; }
.fb-body-rest{ display:grid; }

/* ==== Cada opcion para elegir que tinee forma de elipse ==== */
.fb-options{ display:flex; gap:8px; flex-wrap:wrap; }
.fb-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(140px,1fr)); gap:8px; }
.fb-pill{ border:1px solid var(--fb-line); background:#fff; border-radius:999px; padding:8px 14px; font-weight:600; color:#1c1c1c; cursor:pointer; transition:.15s; }
.fb-pill.is-checked{ border-color:var(--fb-green); background:var(--fb-green-soft); color:var(--fb-green); }

/* ==== Sliders delgados ==== */
.fb-range{ display:grid; gap:10px; width:100%; }
.fb-noui.noUi-target{ background:#E9ECEF; border:none !important; box-shadow:none !important; border-radius:8px; height:var(--fb-track-h) !important; }
.fb-noui .noUi-base{ border-radius:8px; }
.fb-noui .noUi-connect{ background: var(--fb-green); }
.fb-noui .noUi-handle{
  width:var(--fb-handle) !important; height:var(--fb-handle) !important;
  top: calc((var(--fb-track-h) - var(--fb-handle)) / 2) !important;
  background:#fff; border:2px solid var(--fb-green); border-radius:50%; box-shadow:0 2px 6px rgba(0,0,0,.25); cursor:grab;
}
.fb-noui .noUi-handle:before, .fb-noui .noUi-handle:after{ display:none; }

/* ==== Inputs de rango ==== */
.fb-range-inputs{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.fb-range-inputs label{ display:flex; align-items:center; gap:8px; background:#fff; border:1px solid var(--fb-line); border-radius:10px; padding:6px 10px; }
.fb-range-inputs label>span{ color:#7a7a7a; font-weight:600; }
.fb-range-inputs input{ border:none; outline:none; width:110px; font-weight:700; font-size:14px; font-variant-numeric: tabular-nums; }
.fb-range-inputs .dash{ color:#9aa0a6; font-weight:700; }
.fb-range-inputs .unit{ color:#6b6b6b; font-weight:600; }

/* ===== Footer ===== */
.fb-sheet-footer{ background:var(--fb-green); border-top:none; }
.fb-sheet-footer.is-green{ background:var(--fb-green); }
.fb-btn-group{ width:86%; margin:12px auto; display:flex; justify-content:space-between; gap:18px; }
.fb-btn{
  height:42px; padding:0 22px; border-radius:10px; border:none; font-weight:600; color:#fff; cursor:pointer;
  box-shadow:0 8px 18px rgba(0,0,0,.35); transition: transform .06s ease, filter .12s ease;
}
.fb-btn--primary{ background:var(--fb-blue); }
.fb-btn--danger { background:var(--fb-red);  }
.fb-btn:hover{ transform: translateY(-1px); filter: brightness(1.06); }
.fb-btn:active{ transform: translateY(0);   filter: brightness(0.98); }

/* Responsive */
@media (max-width:768px){
  .fb-row{ flex-wrap:wrap; }
  .fb-search{ flex:1 1 100%; }
  .fb-btn-group{ width:94%; }
}
