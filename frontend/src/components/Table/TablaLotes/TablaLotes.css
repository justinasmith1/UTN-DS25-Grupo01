/* components/TablaLotes.css
   Estilos del tablero de lotes */

/* Wrapper con padding horizontal */
.tl-wrapper { padding-left: 24px; padding-right: 24px; }

/* ===== Toolbar ===== */
.tl-toolbar{ display:flex; justify-content:space-between; align-items:center; gap:16px; margin:8px 0 10px; }
.tl-pages-left{ display:flex; align-items:center; gap:10px; }

.tl-btn{ border:1px solid #d9dee5; background:#fff; border-radius:12px; padding:8px 12px; font-size:14px; cursor:pointer; transition:all .15s ease; }
.tl-btn:hover{ background:#f6f8fa; }
.tl-btn:disabled{ opacity:.5; cursor:not-allowed; }
.tl-btn--primary{ background:#116149; color:#fff; border-color:#116149; }
.tl-btn--primary:hover{ filter:brightness(1.05); }
.tl-btn--soft{ background:#eef7f4; color:#116149; border-color:#d1ece3; }
.tl-btn--ghost{ background:transparent; }
/* --------------------------------------------- */

/* Botón "Columnas": icono + texto alineados */
.tl-btn--columns2{ display:flex; align-items:center; gap:8px; padding:8px 12px; }
.tl-btn__text{ font-weight:500; color:#2b3748; }
/* --------------------------------------------- */

/* Popover columnas */
.tl-columns{ position:relative; }
.tl-popover__container{ position:absolute; z-index:15; top:42px; left:0; display:none; }
.tl-popover__container.is-open,
.tl-columns:has(.tl-popover__container.is-open) .tl-popover__container{ display:block; }

.tl-popover{
  width:270px; max-height:360px; overflow:auto; background:#fff;
  border:1px solid #d9dee5; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.10);
  padding:10px;
}
.tl-popover__header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.tl-chip{ font-size:12px; padding:2px 8px; border-radius:999px; background:#eef1f4; color:#3a4451; }
.tl-chip.is-max{ background:#ffe9e9; color:#b43636; }
.tl-popover__list{ display:grid; gap:6px; margin-bottom:8px; }
.tl-check{ display:grid; grid-template-columns:18px 1fr; align-items:center; gap:8px; padding:6px; border-radius:8px; }
.tl-check:hover{ background:#f6f8fa; }
.tl-check.is-checked{ background:#eef7f4; }
.tl-check.is-disabled{ opacity:.5; }

/* Estilos para drag & drop */
.tl-check--sortable{
  display:grid; 
  grid-template-columns:20px 18px 1fr; 
  align-items:center; 
  gap:8px; 
  padding:6px; 
  border-radius:8px;
  cursor:grab;
  transition:all .15s ease;
}
.tl-check--sortable:hover{ background:#f6f8fa; }
.tl-check--sortable.is-checked{ background:#eef7f4; }
.tl-check--sortable.is-disabled{ opacity:.5; cursor:not-allowed; }

.tl-check__drag-handle{
  display:flex;
  align-items:center;
  justify-content:center;
  color:#9ca3af;
  cursor:grab;
  transition:color .15s ease;
}
.tl-check__drag-handle:hover{
  color:#6b7280;
}
.tl-check__drag-handle:active{
  cursor:grabbing;
}

.tl-popover__separator{
  margin:8px 0;
  padding:4px 0;
  border-top:1px solid #e5e7eb;
  font-size:12px;
  color:#6b7280;
  text-align:center;
}
/* --------------------------------------------- */

/* Dropdown cantidad */
.tl-dd{ position:relative; }
.tl-dd__button{ display:flex; align-items:center; gap:10px; min-width:80px; justify-content:space-between; border:1px solid #d9dee5; background:#fff; border-radius:10px; padding:8px 12px; }
.tl-dd__button{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  min-width:80px;
}

.tl-dd__chev{ font-size:20px; line-height:1; opacity:.85; transform:translateY(1px); transition:transform .15s ease; padding-left: 3px; }
.tl-dd.is-open .tl-dd__chev{ transform:rotate(180deg) translateY(-1px); }
.tl-dd__menu{ position:absolute; top:42px; left:0; min-width:100%; background:#fff; border:1px solid #d9dee5; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,.10); padding:6px; z-index:20; }
.tl-dd__item{ width:100%; text-align:left; border:0; background:transparent; cursor:pointer; padding:8px 10px; border-radius:8px; font-size:14px; }
.tl-dd__item:hover{ background:#f6f8fa; }
.tl-dd__item.is-active{ background:#eef7f4; color:#116149; }
/* --------------------------------------------- */


/* ===== Tabla ===== */
.tl-table{
  border:1px solid #e6ebf2;
  border-radius:12px;
  overflow:hidden;
  background:#fff;
}
.tl-table--scroll{
  overflow-x:auto;
  overflow-y:hidden;
}
.tl-thead{ position:sticky; top:0; z-index:5; background:#f7fafc; border-bottom:1px solid #e6ebf2; }

.tl-tr{ display:grid; column-gap: 20px; } /* <- más espacio entre columnas (no acciones) */
.tl-th, .tl-td{
  box-sizing:border-box;
  padding:12px 14px; border-bottom:1px solid #eef2f6; font-size:14px;
  display:flex; align-items:center; min-height:56px; line-height:1.35; /* altura + línea uniformes */
}
.tl-th{ font-weight:600; color:#2b3748; }
.tl-th--checkbox, .tl-td--checkbox{ justify-content:center; }
/* --------------------------------------------- */


/* Alineaciones */
.tl-th--left,  .tl-td--left  { justify-content:flex-start; text-align:left; }
.tl-th--right, .tl-td--right { justify-content:flex-end;   text-align:right; }
.tl-th--center,.tl-td--center{ justify-content:center;     text-align:center; }

/* -------- Spacer (columna elástica previa a Acciones) -------- */
.tl-th--spacer, .tl-td--spacer{
  padding: 0;
  border-bottom: 1px solid transparent; /* no ensucia el zebra */
  min-height: 56px; /* misma altura que las otras celdas */
}

/* -------- Spacer invisible -------- */
.tl-th--spacer-invisible, .tl-td--spacer-invisible{
  padding: 0;
  border: none;
  background: transparent;
  min-height: 56px;
}
/* --------------------------------------------- */


/* === Columna Acciones ===*/
.tl-th--actions, .tl-td--actions{ gap:10px; }
.tl-th--actions,
[data-col="actions"].tl-th {
  position: sticky;
  right: 0;
  z-index: 5;
  background: #f7fafc;
  width: max-content;
  min-width: 220px;
  text-align: center;
  justify-content: center;
  padding-right: 42px;
}
.tl-td--actions,
[data-col="actions"].tl-td {
  position: sticky;
  right: 0;
  z-index: 4;
  background: #fff;
  width: max-content;
  min-width: 220px;
  text-align: center;
  justify-content: center;  
}
/* --------------------------------------------- */

/* Zebra */
.tl-tbody .tl-tr:nth-child(2n) .tl-td{ background:#fcfdfe; }
.tl-empty{ padding:24px; text-align:center; color:#6b7787; }

/* ===== Números/Unidades ===== */
.tl-td[data-col="precio"],
.tl-td[data-col="superficie"],
.tl-td[data-col="numero"]{
  font-variant-numeric: tabular-nums; /* columnas numéricas alinean perfecto */
}
.u-m2{ display:inline-flex; align-items:baseline; column-gap:4px; }
.u-unit{ font-size:.92em; line-height:1; opacity:.9; }
/* --------------------------------------------- */


/* ===== Íconos redondos (lucide) ===== */
.tl-icon{
  width:36px; height:36px; border-radius:999px;
  display:grid; place-items:center;
  background:#fff;
  border:1px solid rgba(0,0,0,.08);
  box-shadow:0 1px 2px rgba(16,24,40,.06);
  transition: transform .14s ease, box-shadow .14s ease, outline-color .14s ease, outline-offset .14s ease;
}
.tl-icon svg{ width:21px; height: 18px; display:block; }

/* Colores por acción */
.tl-icon--view{   background:#F2F4F7; color:#475467; }
.tl-icon--edit{   background:#EEF0FF; color:#6C7BFD; }
.tl-icon--money{  background:#EAF7EE; color:#1F8C5A; }
.tl-icon--docs{   background: #efe2f3; color: rgb(141, 68, 165); }
.tl-icon--delete{ background:#FEECEC; color:#E05252; }
.tl-icon--promo{ background:#fdfddc; color:#BA8E23; }

/* Hover: anillo finito del color del ícono */
.tl-icon--view:hover,
.tl-icon--edit:hover,
.tl-icon--docs:hover,
.tl-icon--money:hover,
.tl-icon--promo:hover,
.tl-icon--delete:hover{
  outline:1px solid currentColor;
  outline-offset:-3px;
  transform:translateY(-1px);
  box-shadow:0 2px 8px rgba(16,24,40,.12);
}
/* --------------------------------------------- */

/* ===== Paginación ===== */
.tl-pagination{ display:flex; justify-content:center; align-items:center; gap:10px; padding:14px 8px; color:#2b3748; }
.tl-pageinfo{ font-weight:500; }
/* --------------------------------------------- */


/* ===== Badges de Estados/Subestados ===== */
.tl-badge{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius:999px;
  font-size:12px; font-weight:600; letter-spacing:.2px;
  text-transform:uppercase; border:1px solid transparent;
}
.tl-badge--muted  { background:#F2F4F7; color:#475467; border-color:#E5E7EB; }
.tl-badge--success{ background:#E7F7EE; color:#18794E; border-color:#BCE8D3; }
.tl-badge--danger { background:#FEECEC; color:#C23B3B; border-color:#FAC5C5; }
.tl-badge--warn   { background:#FFF6E5; color:#9A5C00; border-color:#FFE2B8; }
.tl-badge--info   { background:#EAF2FF; color:#2952CC; border-color:#CBDCFF; }
.tl-badge--indigo { background:#EEF0FF; color:#5B6BFF; border-color:#D9DDFF; }
/* --------------------------------------------- */


/* === (opcional) ===  */
.tl-td--actions .tl-actions,
.tl-td--actions .tl-action-group,
[data-col="actions"].tl-td .tl-actions,
[data-col="actions"].tl-td .tl-action-group {
  display:flex;
  align-items:center;
  justify-content:flex-start;
  gap:10px;
}

.tl-actions-right{
  display:flex;
  align-items:center;
  gap:12px;            /* <-- separa los botones entre sí */
}

.tl-actions-right .tl-btn{
  min-height:36px;     /* <-- misma altura */
  border-radius:12px;  /* <-- mismo radio que ya usás */
  padding:8px 12px;    /* <-- consistencia interna */
}



/* === Tooltip “cardcito” para botones de acciones (CSS only) === */
.tl-td--actions {
  position: relative;
  overflow: visible;
}

/* Cada icono será el ancla del tooltip */
.tl-td--actions .tl-icon {
  position: relative;
}

/* Tooltip: sale a la izquierda del icono (evita cortar con el borde derecho en el de aplicar promocion) */
.tl-td--actions .tl-icon[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  top: 50%;
  right: calc(100% + 12px);        
  transform: translateY(-50%) translateX(4px);
  opacity: 0;
  pointer-events: none;

  background: #fff;
  color: #0f172a;
  border: 1px solid #d9dee5;       
  border-radius: 10px;
  padding: 6px 10px;
  font-size: 12px;
  line-height: 1.2;
  white-space: nowrap;
  box-shadow: 0 8px 24px rgba(16,24,40,0.12);

  transition: opacity .15s ease, transform .15s ease;
  z-index: 9999;
}

/* Mostrar al pasar el mouse */
.tl-td--actions .tl-icon[data-tooltip]:hover::after,
.tl-td--actions .tl-icon[data-tooltip]:hover::before,
.tl-td--actions .tl-icon[data-tooltip]:focus-visible::after,
.tl-td--actions .tl-icon[data-tooltip]:focus-visible::before {
  opacity: 1;
  transform: translateY(-50%) translateX(0) rotate(45deg);
}

/* Ajuste para el ::after cuando está visible */
.tl-td--actions .tl-icon[data-tooltip]:hover::after,
.tl-td--actions .tl-icon[data-tooltip]:focus-visible::after {
  transform: translateY(-50%);
}

/* Asegurar que el tooltip no herede opacidad del botón disabled */
/* El problema es que opacity en el padre afecta a los pseudo-elementos */
/* Solución: usar un contenedor wrapper o forzar el tooltip a ser completamente opaco */
.tl-td--actions .tl-icon.is-disabled[data-tooltip]::after {
  opacity: 0;
  pointer-events: none;
  /* Valores iniciales sólidos */
  background: #fff !important;
  color: #0f172a !important;
}

/* Tooltip visible incluso cuando el botón está disabled - completamente sólido */
/* IMPORTANTE: El tooltip debe estar en un contexto de renderizado independiente */
.tl-td--actions .tl-icon.is-disabled[data-tooltip]:hover::after {
  /* Forzar opacidad completa - el !important es crítico aquí */
  opacity: 1 !important;
  pointer-events: auto;
  color: #0f172a !important;
  background: #fff !important;
  transform: translateY(-50%) !important;
  /* Asegurar z-index alto para estar por encima de todo */
  z-index: 10000 !important;
  /* El texto debe ser completamente opaco - sin herencia de opacidad */
  text-shadow: none;
  /* Asegurar que el borde también sea opaco */
  border-color: #d9dee5 !important;
}

/* También para el ::before si existe (flecha del tooltip) */
.tl-td--actions .tl-icon.is-disabled[data-tooltip]:hover::before {
  opacity: 1 !important;
}
/* --------------------------------------------- */
